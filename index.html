<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPCSA Clinical Tools</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <header>
        <h1>HPCSA Clinical Decision Support Tools</h1>
    </header>
    <main>
        <!-- Login Section -->
        <section id="login">
            <h2>Login</h2>
            <form id="loginForm">
                <label for="username">Username:</label>
                <input type="text" id="username" placeholder="Enter your username" required>
                <label for="password">Password:</label>
                <input type="password" id="password" placeholder="Enter your password" required>
                <button type="submit">Login</button>
            </form>
            <p id="loginError" style="color: red; display: none;"></p>
        </section>

        <!-- Registration Validation Section -->
        <section id="validation">
            <h2>Validate Registration</h2>
            <form id="validateForm">
                <label for="name">Name:</label>
                <input type="text" id="name" placeholder="E.g., John Doe" required>
                <label for="registration">HPCSA Registration Number:</label>
                <input type="text" id="registration" placeholder="E.g., PR1234567" required>
                <button type="submit">Validate</button>
            </form>
            <p id="validationError" style="color: red; display: none;"></p>
            <p id="validationSuccess" style="color: green; display: none;"></p>
        </section>

        <!-- Help Chatbot -->
        <section id="chatbot">
            <h2>Need Help?</h2>
            <div id="chatbox">
                <p><strong>Chatbot:</strong> Hi! How can I assist you with the registration process?</p>
            </div>
            <input type="text" id="chatInput" placeholder="Type your question here...">
            <button id="chatSend">Send</button>
        </section>
    </main>
    <footer>
        <p>Â© 2024 HPCSA Clinical Tools</p>
    </footer>

    <!-- JavaScript for Interactivity -->
    <script>
        // Login Form Handler
        $("#loginForm").submit(function (e) {
            e.preventDefault();
            const username = $("#username").val().trim();
            const password = $("#password").val().trim();

            if (username === "admin" && password === "password123") {
                alert("Login successful!");
            } else {
                $("#loginError").text("Invalid username or password.").show();
            }
        });

        // Registration Validation
        $("#validateForm").submit(function (e) {
            e.preventDefault();
            const name = $("#name").val().trim();
            const registration = $("#registration").val().trim();

            // Example Validation Logic
            if (!/^PR\d{7}$/.test(registration)) {
                $("#validationError").text("Invalid registration number format. Use 'PR1234567'.").show();
                $("#validationSuccess").hide();
            } else {
                // Mocking HPCSA iRegister Check
                $.ajax({
                    url: `https://hpcsaonline.custhelp.com/app/i_reg_form`,
                    success: function () {
                        $("#validationSuccess").text("Registration validated successfully!").show();
                        $("#validationError").hide();
                    },
                    error: function () {
                        $("#validationError").text("Registration not found. Please check your details.").show();
                        $("#validationSuccess").hide();
                    }
                });
            }
        });

        // Chatbot Interactivity
        $("#chatSend").click(function () {
            const userMessage = $("#chatInput").val().trim();
            if (userMessage) {
                $("#chatbox").append(`<p><strong>You:</strong> ${userMessage}</p>`);

                let botReply = "I'm sorry, I didn't understand that.";
                if (userMessage.includes("registration")) {
                    botReply = "Make sure your registration number is in the format 'PR1234567'.";
                } else if (userMessage.includes("name")) {
                    botReply = "Enter your full name as it appears on your HPCSA record.";
                }

                setTimeout(() => {
                    $("#chatbox").append(`<p><strong>Chatbot:</strong> ${botReply}</p>`);
                    $("#chatbox").scrollTop($("#chatbox")[0].scrollHeight);
                }, 500);

                $("#chatInput").val("");
            }
        });
    </script>
</body>
</html>
